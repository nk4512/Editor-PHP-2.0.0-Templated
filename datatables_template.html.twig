{% extends 'blank.base.html.twig' %}



{% block body %}

    <div class="table_container">
        <h3>{{ table_name }}</h3>
        <table id="{{ table_id }}" class="ui celled table" style="width:100%">
            <thead>
            <tr>
                <th>EDIT ROW</th>
                {% for key in table_data %}
                    <th>{{ key.name }}</th>
                {% endfor %}
            </tr>
            </thead>
            <tfoot>
            <tr>
                <th>EDIT ROW</th>
                {% for key in table_data %}
                    <th>{{ key.name }}</th>
                {% endfor %}
            </tr>
            </tfoot>
        </table>
    </div>
{% endblock %}

{% block style_sheets %}
    <link rel="stylesheet" type="text/css" href="{{ asset('assets/Editor-PHP-2.0.0/DataTables/semantic-ui/2.3.1/semantic.min.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('assets/Editor-PHP-2.0.0/DataTables/DataTables-1.10.24/css/dataTables.semanticui.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('assets/Editor-PHP-2.0.0/buttons/1.7.0/css/buttons.semanticui.min.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('assets/Editor-PHP-2.0.0/select/1.3.2/css/select.semanticui.min.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('assets/Editor-PHP-2.0.0/datetime/1.0.2/css/dataTables.dateTime.min.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('assets/Editor-PHP-2.0.0/css/editor.semanticui.css') }}"/>
    <style>
        .table_container {
            position: fixed;
            top: 50%;
            left: 50%;
            -webkit-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
        }
        a.buttons-collection {
            margin-left: 1em;
        }
    </style>
{% endblock %}


{% block js_files %}
    <script src="{{ asset('assets/jquery/jquery-3.5.1.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/DataTables/semantic-ui/2.3.1/semantic.min.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/DataTables/DataTables-1.10.24/js/jquery.dataTables.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/DataTables/DataTables-1.10.24/js/dataTables.semanticui.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/buttons/1.7.0/js/dataTables.buttons.min.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/colreorder/1.5.3/js/dataTables.colReorder.min.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/buttons/1.7.0/js/buttons.semanticui.min.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/select/1.3.2/js/dataTables.select.min.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/datetime/1.0.2/js/dataTables.dateTime.min.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/js/dataTables.editor.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/js/editor.semanticui.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/buttons/1.7.0/js/buttons.html5.min.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/buttons/1.7.0/js/buttons.print.min.js') }}"></script>
    <script src="{{ asset('assets/Editor-PHP-2.0.0/buttons/1.7.0/js/buttons.colVis.min.js') }}"></script>
    <script>
        var editor; // use a global for the submit and return data rendering in the examples

        $(document).ready(function() {
            editor = new $.fn.dataTable.Editor( {
                ajax: {
                    {% if enable_create is defined and enable_create == true %}
                    create: {
                        type: '{{ table_create_type }}',
                        url:  '{{ table_create_target }}'
                    },
                    {% endif %}
                    {% if enable_edit is defined and enable_edit == true %}
                    edit: {
                        type: '{{ table_edit_type }}',
                        url:  '{{ table_edit_target }}',
                    },
                    {% endif %}
                    {% if enable_remove is defined and enable_remove == true %}
                    remove: {
                        type: '{{ table_remove_type }}',
                        url:  '{{ table_delete_target }}'
                    }
                    {% endif %}
                },
                table: "#{{ table_id }}",
                idSrc: "{{ row_id_value }}",
                type: 'datatable',
                fields: [
                    {% for key in table_data %}
                    { label: "{{ key.name }}:", data:'{{ key.key }}', name: '{{ key.key }}', {% if key.class is defined %}class: '{{ key.class }}'{% endif %}},
                    {% endfor %}
                ]
            } );

            var table = $('#{{ table_id }}').DataTable( {
                "scrollY":        "200px",
                "scrollX":        true,
                "scrollCollapse": true,
                "paging":         false,
                ajax: "{{ table_data_source }}",
                colReorder: true,
                columns: [
                    {
                        data: null,
                        defaultContent: '',
                        className: 'select-checkbox',
                        orderable: false
                    },
                    {% for key in table_data %}
                    { data:'{{ key.key }}', name: '{{ key.key }}', width: '{{ key.width }}', {% if key.class is defined %}class: '{{ key.class }}'{% endif %}},
                    {% endfor %}
                ],
                select: {
                    style:    'os',
                    selector: 'td:first-child'
                },
            } );

            // Display the buttons
            new $.fn.dataTable.Buttons( table, [
                {% if enable_create is defined and enable_create == true %}
                { extend: "create", editor: editor },
                {% endif %}
                {% if enable_edit is defined and enable_edit == true %}
                { extend: "edit",   editor: editor },
                {% endif %}
                {% if enable_remove is defined and enable_remove == true %}
                { extend: "remove", editor: editor },
                {% endif %}
                { extend: "colvis", editor: editor },
                {
                    extend: 'collection',
                    text: 'Export',
                    buttons: [
                        'copy',
                        'excel',
                        'csv',
                        'pdf',
                        'print'
                    ]
                }
            ] );

            table.buttons().container()
                .appendTo( $('div.eight.column:eq(0)', table.table().container()) );


        } );
    </script>
{% endblock %}




